<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.2.1 (452715)"/><meta name="altitude" content="19"/><meta name="author" content="scarecroweib"/><meta name="created" content="2014-08-24 08:39:57 +0000"/><meta name="latitude" content="39.21387142999998"/><meta name="longitude" content="117.1862712099999"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2014-08-26 02:19:07 +0000"/><meta name="application-data:corenote-localUUID" content="218E6EC3-44AA-49FC-99F4-44FAEE29FE2B"/><meta name="application-data:corenote-hostUUID" content="0C39B319-E694-4162-9C47-E1D5E1C3DF44"/><title>｛学习｝开始一个playframework</title></head><body><div>1.创建     play new hello_world</div><div>2.添加IDE支持</div><div>               play eclipsify hello_world</div><div>3.创建一个model</div><div>     1）数据表</div><div>          <span style="font-size: 11px; font-family: Monaco; color: #931a68;">create</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">table</span> <span style="font-size: 11px; font-family: Monaco;">if</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">not</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">exists</span> <span style="font-size: 11px; font-family: Monaco;">Auth(</span></div><div><span style="font-size: 11px; font-family: Monaco;">          id bigint(20)</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">not</span> <span style="font-size: 11px; font-family: Monaco; color: #5329d2;">null</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">primary</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">key</span><span style="font-size: 11px; font-family: Monaco;"><br clear="none"/>       )ENGINE=InnoDB;</span></div><div>     2）新建Auth类，继承<span style="font-family: Monaco; font-size: 11px;">GenericModel</span></div><div><span style="font-size: 11px; font-family: Monaco; color: #931a68;">package</span> <span style="font-size: 11px; font-family: Monaco;">models;<br clear="none"/></span><span style="font-size: 11px; font-family: Monaco; color: #931a68;">import</span> <span style="font-size: 11px; font-family: Monaco;">javax.persistence.*;<br clear="none"/></span><span style="font-size: 11px; font-family: Monaco; color: #931a68;">import</span> <span style="font-size: 11px; font-family: Monaco;">play.db.jpa.GenericModel;<br clear="none"/> <br clear="none"/></span><span style="font-size: 11px; font-family: Monaco; color: #777777;">@Entity   关联表的注释</span></div><div><span style="font-size: 11px; font-family: Monaco; color: #777777;">@Table</span><span style="font-size: 11px; font-family: Monaco;">(name=</span><span style="font-size: 11px; font-family: Monaco; color: #3933ff;">"Auth</span><span style="color: #3933ff; font-family: Monaco;"><span style="font-size: 11px;">”</span></span><span style="font-family: Monaco;"><span style="font-size: 11px;">)     表名，不定义默认为该类名</span></span><span style="font-size: 11px; font-family: Monaco; color: #777777;"><br clear="none"/></span></div><div><span style="font-size: 11px; font-family: Monaco; color: #931a68;">public</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">class</span> <span style="font-size: 11px; font-family: Monaco;">Auth</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">extends</span> <span style="font-size: 11px; font-family: Monaco;">GenericModel {<br clear="none"/></span><span style="font-size: 11px; font-family: Monaco; color: #777777;">        @Id     主键注释</span><span style="font-size: 11px; font-family: Monaco;"><br clear="none"/></span><span style="font-size: 11px; font-family: Monaco; color: #777777;">        @GeneratedValue(strategy = GenerationType.TABLE, generator = "id_gen") </span></div><div><span style="font-size: 11px; font-family: Monaco; color: #777777;">                 <span style="color: #00ff00;">//指定以TABLE管理主键，并且名称为id_gen</span></span></div><div><span style="font-size: 11px; font-family: Monaco;"><span style="color: #00ff00;">        <span style="color: #808080;">@TableGenerator(name = "id_gen", table = "ID_GEN", pkColumnName = "GEN_ID", valueColumnName = "GEN_VAL", pkColumnValue = "Auth", allocationSize=1)</span>  主键管理</span></span></div><div><span style="font-size: 11px; font-family: Monaco; color: #931a68;">         public</span> <span style="font-size: 11px; font-family: Monaco; color: #931a68;">long</span> <span style="font-size: 11px; font-family: Monaco; color: #0326cc;">id</span><span style="font-size: 11px; font-family: Monaco;">;</span><span style="font-size: 11px; font-family: Monaco;"><br clear="none"/> }<br clear="none"/></span></div><div><br clear="none"/></div><div>4.配置log4j</div><div>application.conf:</div><div>     application.log=DEBUG</div><div>     # More logging configuration<br clear="none"/>     application.log.path=/log4j.properties<br clear="none"/>     application.log.system.out=off</div><div><br clear="none"/></div><div><span>log4j.properties</span></div><div>    <span style="color: #0000ff;">#Level: OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL</span></div><div><span>    log4j.rootLogger=ERROR, Console, Rolling <span style="color: #0000ff;">//Level, appenderName, appenderName, ...</span></span></div><div><span style="color: #0000ff;">    #将LOG输出到Console（控制台）和Rolling （循环文件）</span></div><div><span>    log4j.logger.play=DEBUG</span></div><div><span>    </span></div><div><span>    # Console<br clear="none"/>    log4j.appender.Console=org.apache.log4j.ConsoleAppender<br clear="none"/>    log4j.appender.Console.layout=org.apache.log4j.PatternLayout<br clear="none"/>    log4j.appender.Console.layout.ConversionPattern=%d{ABSOLUTE} %-5p ~ %m%n</span></div><div><span><br clear="none"/></span></div><div><span>    # Rolling files</span></div><div><span>    log4j.appender.Rolling=org.apache.log4j.DailyRollingFileAppender</span></div><div><span>    log4j.appender.Rolling.File=<strong><span style="color: #ff0000;">/var/www/play/dev/card/logs/application.log</span></strong></span></div><div><span>    log4j.appender.Rolling.DatePattern='.'yyyy-MM-dd<br clear="none"/>    log4j.appender.Rolling.layout=org.apache.log4j.PatternLayout<br clear="none"/>    log4j.appender.Rolling.layout.ConversionPattern=[%d{yyyy/MM/dd HH:mm:ss.SSS}] %F %M [%p] - %m%n</span></div><div><br clear="none"/></div><div>5.读取application.conf中的自定义信息：</div><div>    Play.configuration.getProperty("配置项");</div><div><br clear="none"/></div><div>6.https设置</div><div>    进入conf:</div><div>          #openssl genrsa 1024 &gt; host.key</div><div>          #openssl req -new -x509 -nodes -sha1 -days 365 -key host.key &gt; host.cert</div><div>    编辑application.conf:</div><div>         https.port=9443<br clear="none"/><br clear="none"/>         # X509 certificates<br clear="none"/>         certificate.key.file=conf/host.key<br clear="none"/>         certificate.file=conf/host.cert<br clear="none"/>         # In case your key file is password protected<br clear="none"/>         certificate.password=secret<br clear="none"/>         trustmanager.algorithm=JKS</div><div><br clear="none"/></div><div>    访问：https://localhost:9443/</div></body></html>