<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.2.1 (452715)"/><meta name="author" content="scarecroweib"/><meta name="created" content="2014-08-25 06:45:55 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2014-08-25 14:59:03 +0000"/><meta name="application-data:corenote-localUUID" content="00562941-E5AA-49BD-B1E1-7289DB4EA7CE"/><meta name="application-data:corenote-hostUUID" content="0C39B319-E694-4162-9C47-E1D5E1C3DF44"/><title>｛学习｝Controller-filter实现</title></head><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
<pre xml:space="preserve">
<code>定义方法时添加注释：@Before<br clear="none"/>设定例外：</code>@Before(unless="login") 对于login方法不执行filter<br clear="none"/>设定白名单：@Before(only={"login","logout"}) 对于login和logout方法执行filter<br clear="none"/>例：<br clear="none"/> @Before(unless="login”)//方法名可以是Controller.Method<br clear="none"/> public static void checkLogin(){<br clear="none"/>      //检查用户登录情况<br clear="none"/>      String username = Cache.get(session.getId(), String.class);<br clear="none"/>      if(username == null || username.trim().length() &lt;= 0){<br clear="none"/>           //没有登录信息跳转到login<br clear="none"/>           login(null);<br clear="none"/>      }else{<br clear="none"/>           //否则更新登录信息，通过filter<br clear="none"/>           Cache.set(session.getId(), username, "30mn");<br clear="none"/>      }<br clear="none"/> }<br clear="none"/> <br clear="none"/> public static void login(String username){<br clear="none"/>      if(username != null &amp;&amp; username.trim().length() &gt; 0){<br clear="none"/>           Cache.set(session.getId(), username, "30mn");<br clear="none"/>           index();<br clear="none"/>           return;<br clear="none"/>      }<br clear="none"/>      render();<br clear="none"/> }<br clear="none"/> <br clear="none"/> public static void index() {<br clear="none"/>      render();<br clear="none"/> }<br clear="none"/>
</pre>
</body></html>